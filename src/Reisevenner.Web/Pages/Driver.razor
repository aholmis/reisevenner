@using Reisevenner.Web.Data

<div class="driver">
    <h3>Jeg kjører!</h3>
    <div class="driver-row">
        <div style="margin-bottom: 15px;">
            <label for="Name">Navn</label>
            <input id="Name" @bind="DriverInfo.DriverName" placeholder="Ditt navn"/>
        </div>
        <div style="margin-bottom: 15px;">
            <label for="Phone">Mobilnr</label>
            <input id="Phone" @bind="DriverInfo.Phone" placeholder="Telefonnummer"/>
        </div>
        <div style="margin-bottom: 15px;">
            <label for="Space">Antall plasser</label>
            <input id="Space" @bind="DriverInfo.AvailableSpace" type="number" placeholder="F.eks. 4" />
        </div>
        <div style="margin-bottom: 15px;">
            <button @onclick="() => OnDelete.InvokeAsync(DriverInfo)">Kan ikke kjøre likevel</button>
        </div>
        <div style="margin-bottom: 15px;">
            <button class="addpassbtn" disabled=@(DriverInfo.BilenErStappFull) @onclick="OnAddPassenger">Jeg vil sitte på</button>
            <label class="@(DriverInfo.BilenErStappFull ? "buttonDisabledMsg" : "hidden")">Beklager, fullt..</label>
        </div>
    </div>
    <div class="passengers @(DriverInfo.BilenErStappFull ? "full" : "")">
        <h4 style="margin-top: 20px; margin-bottom: 10px;">Passasjerer</h4>
        @foreach (var passenger in DriverInfo.Passengers)
        {
            <Passenger PassengerInfo="passenger"/>
        }
    </div>
</div>
@code {
    [Parameter]
    public DriverModel DriverInfo { get; set; }

    [Parameter]
    public EventCallback<DriverModel> OnDelete { get; set; }

    public void OnAddPassenger()
    {
        DriverInfo.Passengers.Add(new());
    }
}
